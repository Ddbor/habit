"use strict";(self.webpackChunk_ddbor_habit=self.webpackChunk_ddbor_habit||[]).push([[625],{69517:function(Vt,je,h){h.r(je),h.d(je,{HabitColumnSetting:function(){return ht},HabitDragSortTable:function(){return Ht},HabitMultipleSelect:function(){return yt},HabitRangePicker:function(){return Je},HabitTimeSelecto:function(){return Mt},HabitWeekTimeSelecto:function(){return $t},arrayMoveImmutable:function(){return ie},arrayMoveMutable:function(){return Ge},deepFindItem:function(){return ze},groupHabitColumns:function(){return Te},habitColumnsCopy:function(){return Q},habitSortColumns:function(){return q},sortGroupHabitColumns:function(){return Fe}});var Le=h(57213),d=h.n(Le),We=h(54306),w=h.n(We),Ye=h(28001),ke=h(7553),J=h(54223),ve=h(16328),Qe=h(58290),Ne=h(71583),Ee=h(17852),v=h(85170),Ue=h(74637),B=h.n(Ue),t=h(43010),he=function(){return[{label:"\u4ECA\u65E5",value:[B()(),B()()]},{label:"\u6628\u65E5",value:[B()().subtract(1,"d"),B()().subtract(1,"d")]}]},Je=function(e){var n=e.value,a=e.popoverProps,r=e.buttonProps,o=e.presetsButtonProps,s=e.subtmitButtonProps,i=e.cancelButtonProps,c=e.presets,g=e.startDatePickerProps,y=e.endDatePickerProps,x=e.format,S=x===void 0?"YYYY-MM-DD":x,b=e.compared,k=e.onChange,f=(0,v.useState)(["",""]),C=w()(f,2),m=C[0],p=C[1],N=(0,v.useState)(n),I=w()(N,2),F=I[0],R=I[1],Y=(0,v.useState)(["",""]),L=w()(Y,2),G=L[0],z=L[1],A=(0,v.useState)(!1),M=w()(A,2),P=M[0],E=M[1],O=(0,v.useMemo)(function(){return typeof b=="boolean"},[b]),le=(0,v.useState)(!1),ue=w()(le,2),W=ue[0],ce=ue[1];(0,v.useEffect)(function(){ce(O?b:null)},[b,O]);var _=(0,v.useMemo)(function(){return O&&!b},[O,b]),pe=(0,v.useMemo)(function(){return O&&!W},[O,W]),xe=(0,v.useMemo)(function(){return P?180:0},[P]),U=(0,v.useMemo)(function(){var u,j;if(O){var Z,V;return[((Z=he().find(function(te){return B()(te.value[0]).isSame(n[0],"d")}))===null||Z===void 0?void 0:Z.label)||m[0],_?"":((V=he().find(function(te){return B()(te.value[0]).isSame(n[1],"d")}))===null||V===void 0?void 0:V.label)||m[1]]}var ee=(u=c||[])===null||u===void 0||(j=u.concat(he()).find(function(te){return B()(te.value[0]).isSame(n[0],"d")&&B()(te.value[1]).isSame(n[1],"d")}))===null||j===void 0?void 0:j.label;return[ee||m[0],ee?"":m[1]]},[n,c,_,O,m]),de=(0,v.useMemo)(function(){return{textAlign:U[1]?"center":"left"}},[U]),ye=(0,v.useCallback)(function(u){return u?u>B()().endOf("d"):!1},[F[1]]),be=(0,v.useCallback)(function(u){return u?W?u>B()().endOf("d"):F[0]&&u<F[0]||u>B()().endOf("d"):!1},[F[0],W]);(0,v.useEffect)(function(){R(n);var u=[B()(n[0]).format(S),B()(n[1]).format(S)];p(u),z(u)},[n,P]);var Ce=function(j,Z){var V=[j,F[1]];j>F[1]&&(V[1]=B()(j)),R(V),z([Z,B()(V[1]).format(S)])},K=function(j,Z){R([F[0],j]),z([G[0],Z])},D=function(j){r!=null&&r.disabled?E(!1):E(j)},H=function(){E(!1),k==null||k(F,G,W)},T=function(j){R(j.value);var Z=[B()(j.value[0]).format(S),B()(j.value[1]).format(S)];z(Z),E(!1),k==null||k(j.value,Z,W)},$=(0,v.useCallback)(function(){return c==null?void 0:c.map(function(u,j){return typeof u.label=="string"?(0,t.jsx)("div",{className:"habit-range-picker-popover-presets-item",children:(0,t.jsx)(J.ZP,d()(d()({type:"link",size:"small",style:{padding:0,textAlign:"left",width:"100%"},onClick:function(){return T(u)}},o),{},{children:u.label}))},j):u.label})},[c]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ve.Z,d()(d()({trigger:"click",placement:"bottom",open:P,getPopupContainer:function(j){return j},overlayInnerStyle:{padding:0}},a),{},{onOpenChange:D,content:(0,t.jsxs)("div",{className:"habit-range-picker-popover-content",children:[(0,t.jsxs)("div",{className:"habit-range-picker-popover-head",children:[(0,t.jsxs)("div",{className:"habit-range-picker-popover-head-title",children:[(0,t.jsx)("div",{children:"\u9009\u62E9\u65E5\u671F:"}),O&&(0,t.jsxs)("div",{className:"habit-range-picker-popover-head-switch",children:[(0,t.jsx)("span",{children:"\u5BF9\u6BD4"}),(0,t.jsx)(Qe.Z,{size:"small",checked:!!W,onChange:function(j){return ce(j)}})]})]}),(0,t.jsxs)("div",{className:"habit-range-picker-popover-date",children:[(0,t.jsx)(Ne.Z,d()({showToday:!1,allowClear:!1,size:"small",value:F[0],disabledDate:ye,onChange:Ce},g)),(0,t.jsx)("span",{className:"habit-range-picker-popover-date-separator",children:"-"}),(0,t.jsx)(Ne.Z,d()(d()({showToday:!1,allowClear:!1,size:"small",placement:"bottomRight",value:F[1],disabledDate:be,onChange:K},y),{},{disabled:pe}))]})]}),(0,t.jsx)(Ee.Z,{style:{margin:0}}),c&&c.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"habit-range-picker-popover-presets",children:[(0,t.jsx)("div",{className:"habit-range-picker-popover-presets-title",children:"\u5FEB\u6377\u65E5\u671F:"}),(0,t.jsx)("div",{className:"habit-range-picker-popover-presets-list",children:$()})]}),(0,t.jsx)(Ee.Z,{style:{margin:0}})]}),(0,t.jsxs)("div",{className:"habit-range-picker-popover-footer",children:[(0,t.jsx)(J.ZP,d()(d()({size:"small"},i),{},{style:{marginRight:"8px"},onClick:function(){E(!1)},children:"\u53D6\u6D88"})),(0,t.jsx)(J.ZP,d()(d()({type:"primary",size:"small"},s),{},{onClick:function(){return H()},children:"\u786E\u5B9A"}))]})]}),children:(0,t.jsx)("div",{className:"habit-range-picker",children:(0,t.jsx)(J.ZP,d()(d()({},r),{},{onClick:function(){return E(!P)},children:(0,t.jsxs)("div",{className:"habit-range-picker-button",children:[(0,t.jsx)(Ye.Z,{style:{color:"#999"}}),(0,t.jsxs)("div",{className:"habit-range-picker-button-text",children:[(0,t.jsx)("span",{className:"habit-range-picker-button-text-item",style:de,children:U[0]}),U[1]&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"habit-range-picker-button-text-separator",children:O?"\u5BF9\u6BD4":"-"}),(0,t.jsx)("span",{className:"habit-range-picker-button-text-item",style:de,children:U[1]})]})]}),(0,t.jsx)(ke.Z,{style:{color:"#999",transform:"rotate(".concat(xe,"deg)"),transition:"all 0.3s"}})]})}))})}))})},Xe=h(25359),re=h.n(Xe),qe=h(49811),De=h.n(qe),_e=h(12342),fe=h.n(_e),we=h(71953),Ae=h(75445),et=h(8505),tt=h(49070),Ie=h(59282),me=h(94986),Te=function(e){return e.reduce(function(n,a){var r=a.properties.groupName,o=a.properties.groupOrder;return n[r]||(n[r]={groupName:r,groupOrder:o,columns:[]}),n[r].columns.push(a),n},{})},Fe=function(e){return Object.values(Te(e)).sort(function(n,a){return n.groupOrder-a.groupOrder})},Oe=function(e){return typeof e.order=="number"?e.order:1/0},q=function(e){return e.filter(function(n){return n.show}).sort(function(n,a){return Oe(n)-Oe(a)})},Q=function(e){return e.map(function(n){return d()({},n)})},nt=(0,Ie.W8)(function(l){var e=l.value;return(0,t.jsx)("div",{className:"habit-column-setting-drag-item",style:{backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAYAAACEYr13AAAAt0lEQVR4Ae3BQQ3EMAxE0d8MDRMKEUtGFMlESig0RtoiaA697ntXVU3bzUNSrrVuXlTVtN08JOWw3UAAYbs5sN1AAGG7Bx8NSQlsYEtKDiQlsIEtKfnjqqppu3lIyrXWzYuqmrabh6QcthsIIGw3B7YbCCBs9+CjISmBDWxJyYGkBDawJSV/XFU1bTcPSbnWunlRVdN285CUw3YDAYTt5sB2AwGE7R58NCQlsIEtKTmQlMAGtqT8AT13ZKKS1qIVAAAAAElFTkSuQmCC")'},children:(0,t.jsx)(t.Fragment,{children:e==null?void 0:e.title})})}),rt=(0,Ie.JN)(function(l){var e=l.children;return(0,t.jsx)("div",{className:"habit-column-setting-drag-box",children:e})}),at=function(e){var n=e.dataSource,a=e.onSortEnd,r=(0,me.J)(function(o){var s=o.oldIndex,i=o.newIndex;if(s!==i){var c=ie({array:Q(n),fromIndex:s,toIndex:i});c.forEach(function(g,y){g.order=y}),a==null||a(c)}});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(rt,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:r,children:n.map(function(o,s){return(0,t.jsx)(nt,{index:s,value:o},o.key)})})})},ae=h(31762),ot=h(89058),st={color:"#ccc",cursor:"pointer",fontSize:"14px",marginLeft:"2px",verticalAlign:"middle"},Pe=function(e){return e.every(function(n){return n.show})},it=function(e){return e.some(function(n){return n.show})&&!Pe(e)},lt=function(e,n){return!n||typeof e!="string"?!1:e.includes(n)},ut=function(e){var n=e.dataSource,a=e.filterTitle,r=e.max,o=r===void 0?1/0:r,s=e.sortColumns,i=s===void 0?[]:s,c=e.onChange,g=(0,v.useState)([]),y=w()(g,2),x=y[0],S=y[1],b=(0,v.useMemo)(function(){return i.length>=o},[o,i]);(0,v.useEffect)(function(){S(Fe(Q(n)))},[n]);var k=function(C,m){var p=C.target.checked,N=Q(n),I=i.length;m.forEach(function(F){if(!(p&&I>=o||F!=null&&F.disable)){var R=N.findIndex(function(Y){return Y.key===F.key});N[R].show=p,p?I++:delete N[R].order}}),c==null||c(N)};return(0,t.jsx)(t.Fragment,{children:x.map(function(f,C){return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"habit-column-setting-left-cont-title",children:(0,t.jsx)(ae.Z,{indeterminate:it(f.columns),checked:Pe(f.columns),onChange:function(p){return k(p,f.columns)},children:(0,t.jsx)("span",{className:"habit-column-setting-checkbox-label",children:f.groupName})})}),(0,t.jsx)("div",{className:"habit-column-setting-checkbox-list clearfix",children:f.columns.map(function(m){return(0,t.jsxs)("div",{className:"habit-column-setting-checkbox-item ".concat(lt(m.title,a)?"habit-column-setting-checkbox-item-active":""),children:[(0,t.jsx)(ae.Z,{checked:m.show,disabled:m.disable||b&&!m.show,onChange:function(N){return k(N,[m])},children:(0,t.jsx)("span",{className:"habit-column-setting-checkbox-label",children:m==null?void 0:m.title})}),m.description&&(0,t.jsx)(ve.Z,{content:m.description,overlayInnerStyle:{maxWidth:200},children:(0,t.jsx)(ot.Z,{style:st})})]},m.key)})})]},C.toString())})})},Ke=h(75736),ct=["columns","open","max","min","onOk","persistenceKey","persistenceType","extraContent"],dt=we.Z.Search,vt=Ae.Z.useToken,ht=function(e){var n=e.columns,a=e.open,r=e.max,o=e.min,s=o===void 0?1:o,i=e.onOk,c=e.persistenceKey,g=e.persistenceType,y=e.extraContent,x=fe()(e,ct),S=x.onClose,b=(0,v.useState)([]),k=w()(b,2),f=k[0],C=k[1],m=(0,v.useState)([]),p=w()(m,2),N=p[0],I=p[1],F=(0,v.useState)(""),R=w()(F,2),Y=R[0],L=R[1],G=(0,v.useRef)([]),z=(0,v.useState)(!0),A=w()(z,2),M=A[0],P=A[1],E=(0,v.useMemo)(function(){return!c||!g||typeof window=="undefined"},[c,g]),O=vt(),le=O.token,ue=(0,v.useState)(!1),W=w()(ue,2),ce=W[0],_=W[1],pe=(0,v.useCallback)(function(K){if(E)return K;var D=window[g];try{var H=D==null?void 0:D.getItem(c);if(H){var T=JSON.parse(H),$=Q(K);return $.forEach(function(u){var j,Z,V,ee;u.show=(j=T==null||(Z=T[u.key])===null||Z===void 0?void 0:Z.show)!==null&&j!==void 0?j:u.show,u.order=(V=T==null||(ee=T[u.key])===null||ee===void 0?void 0:ee.order)!==null&&V!==void 0?V:u.order}),$}}catch(u){console.warn(u)}return K},[c,g,E]),xe=(0,v.useCallback)(function(K){if(!E){var D=window[g];try{var H=K.reduce(function(T,$){return T[$.key]={show:$.show,order:$.order},T},{});D==null||D.setItem(c,JSON.stringify(H))}catch(T){console.warn(T)}}},[c,g,E]),U=function(D,H){return D.map(function(T){var $=H.find(function(j){return j.key===T.key}),u=d()(d()({},T),{},{show:!!$});return $&&(u.order=$.order),u})};(0,v.useEffect)(function(){if(a){var K=n;G.current=K,P(!1),C(q(Q(G.current))),I(G.current)}},[a,n]),(0,v.useEffect)(function(){if(!a&&M&&!E){var K=pe(n);P(!1),i==null||i(U(K,q(Q(K))))}},[M,E,a,n]);var de=function(D){L(D)},ye=function(D){var H=D.filter(function(u){return u.show&&!f.find(function(j){return j.key===u.key})}),T=f.length-1,$=q(D.map(function(u,j){if(H.find(function(V){return V.key===u.key}))return d()(d()({},u),{},{order:++T});var Z=f.findIndex(function(V){return V.key===u.key});return d()(d()({},u),{},{order:Z===-1?void 0:Z})}));C($),I(D)},be=function(){var D=Q(G.current);D.forEach(function(H){H.disable||(H.show=!1,delete H.order)}),C(q(D)),I(D)},Ce=function(){var K=De()(re()().mark(function D(H){var T;return re()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(typeof s=="number"&&f.length<s)){u.next=3;break}return _(!0),u.abrupt("return");case 3:if(!(typeof r=="number"&&f.length>r)){u.next=6;break}return _(!0),u.abrupt("return");case 6:return T=U(G.current,f),_(!1),xe(T),u.next=11,i==null?void 0:i(T);case 11:if(u.t0=u.sent,u.t0===!1){u.next=14;break}S==null||S(H);case 14:case"end":return u.stop()}},D)}));return function(H){return K.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(et.Z,d()(d()({title:"\u9009\u62E9\u6570\u636E\u5B57\u6BB5",placement:"right",width:1e3,bodyStyle:{padding:"16px 24px",backgroundColor:"#f9f9f9"},footer:(0,t.jsxs)(tt.Z,{children:[(0,t.jsx)(J.ZP,{type:"default",onClick:S,children:"\u53D6\u6D88"}),(0,t.jsx)(J.ZP,{type:"primary",onClick:Ce,children:"\u786E\u5B9A"}),ce&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ke.Z,{style:{color:le.colorError,fontSize:12}}),(0,t.jsxs)("span",{style:{color:le.colorError,fontSize:12},children:["\u8BF7",typeof s=="number"?"\u81F3\u5C11\u9009\u62E9 ".concat(s," \u4E2A\u6307\u6807"):"",typeof s=="number"&&typeof r=="number"&&"\uFF0C",typeof r=="number"?"\u81F3\u591A\u9009\u62E9 ".concat(r," \u4E2A\u6307\u6807"):""]})]})]}),open:a},x),{},{children:(0,t.jsxs)("div",{className:"habit-column-setting-body",children:[(0,t.jsxs)("div",{className:"habit-column-setting-left",children:[(0,t.jsx)("div",{className:"habit-column-setting-left-head",children:(0,t.jsx)(dt,{placeholder:"\u641C\u7D22\u6570\u636E\u5B57\u6BB5",allowClear:!0,style:{width:200},onSearch:de})}),(0,t.jsx)("div",{className:"habit-column-setting-left-cont",children:(0,t.jsx)(ut,{max:r,sortColumns:f,dataSource:N,filterTitle:Y,onChange:ye})})]}),(0,t.jsxs)("div",{className:"habit-column-setting-right",children:[(0,t.jsxs)("div",{className:"habit-column-setting-right-head",children:[(0,t.jsxs)("span",{className:"habit-column-setting-checkbox-label",children:["\u5DF2\u9009\uFF08",f.length,r?" / ".concat(r):null,"\uFF09\u9879"]}),(0,t.jsx)("a",{className:"habit-column-setting-right-a",onClick:be,children:"\u6E05\u7A7A"}),y]}),(0,t.jsx)("div",{className:"habit-column-setting-right-alert",children:"\u62D6\u52A8\u4EE5\u4E0B\u5B57\u6BB5\u8FDB\u884C\u6392\u5E8F"}),(0,t.jsx)(at,{dataSource:f,onSortEnd:function(D){return C(q(D))}})]})]})}))})},ft=h(53911),mt=h(55457),gt=h(79131),St=h(21503),pt=we.Z.Search,xt=Ae.Z.useToken,yt=function(e){var n=e.popoverProps,a=e.buttonProps,r=e.searchProps,o=e.className,s=e.value,i=e.style,c=e.onChange,g=e.options,y=g===void 0?[]:g,x=e.buttonText,S=e.showSearch,b=S===void 0?!0:S,k=(0,v.useState)(!1),f=w()(k,2),C=f[0],m=f[1],p=(0,v.useState)(""),N=w()(p,2),I=N[0],F=N[1],R=(0,v.useMemo)(function(){return y.filter(function(E){return E.label.includes(I)})},[I,y]),Y=(0,v.useState)(!1),L=w()(Y,2),G=L[0],z=L[1],A=xt(),M=A.token,P={color:M.colorTextQuaternary,fontSize:M.fontSizeIcon};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ve.Z,d()(d()({open:C,onOpenChange:m,placement:"bottom",trigger:"click",overlayStyle:{width:250}},n),{},{content:(0,t.jsxs)(t.Fragment,{children:[!!b&&(0,t.jsx)(pt,d()(d()({placeholder:"\u540D\u79F0\u641C\u7D22",className:"habit-multiple-select-search",allowClear:!0,size:"small"},r),{},{value:I,onChange:function(O){return F(O.target.value)}})),(0,t.jsx)(ae.Z.Group,{value:s,onChange:c,children:(0,t.jsx)(ft.Z,{gutter:[0,10],children:R.map(function(E){return(0,t.jsx)(mt.Z,{span:24,children:(0,t.jsx)(ae.Z,{value:E.value,children:E.label})},E.value)})})}),!R.length&&(0,t.jsx)(gt.Z,{description:!1})]}),children:(0,t.jsx)(J.ZP,d()(d()({className:"habit-multiple-select-button ".concat(o),style:i},a),{},{onMouseEnter:function(){return z(!0)},onMouseLeave:function(){return z(!1)},children:(0,t.jsxs)("div",{className:"habit-multiple-select-button-content",children:[(0,t.jsx)("span",{children:x}),s!=null&&s.length?G?(0,t.jsx)(Ke.Z,{className:"habit-multiple-select-icon",style:P,onClick:function(O){O.stopPropagation(),c==null||c([])}}):(0,t.jsx)(St.Z,{className:"habit-multiple-select-icon",count:s==null?void 0:s.length,showZero:!0,size:"small",color:M.colorPrimary}):(0,t.jsx)(ke.Z,{className:"habit-multiple-select-icon",style:P})]})}))}))})},bt=h(65854),ge=h.n(bt),Ct=h(43014),jt=h(46996),X=h(87966),Se=h(41485),kt=h(40202),Nt=function l(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"children",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"treeKey",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];return e.forEach(function(o){o[a]&&r.push(o[a]),Array.isArray(o[n])&&l(o[n],n,a,r)}),r},Et=function(e,n,a){var r=[n.id,a.id].map(function(g){return g.toString().split("-")}),o=w()(r,2),s=o[0],i=o[1];if(s.length===i.length&&s.length===1){var c=ie({array:e,fromIndex:parseInt(s[0]),toIndex:parseInt(i[0])});return{data:c,status:!0}}return{data:e,status:!1}},oe=function(e,n,a){return e.reduce(function(r,o){return Array.isArray(r)?r[Number(o)]:r[a][Number(o)]},n)},se=function(e,n,a,r){var o=[n.id,a.id].map(function(S){return S.toString().split("-")}),s=w()(o,2),i=s[0],c=s[1],g=i.pop(),y=c.pop();if(i.length!==c.length||!i.length||i.join(",")!==c.join(","))return{data:e,status:!1};var x=oe(i,e,r);return x[r]=ie({array:x[r],fromIndex:parseInt(g),toIndex:parseInt(y)}),{data:e,status:!0}},Dt=h(93525),ne=h.n(Dt),wt=function(e,n){for(var a=!1,r=0;r<e.length;r++){var o=e[r],s=n[r];if(o!==s)if(typeof s=="undefined"||o>s){a=!0;break}else{a=!1;break}}return a?"up":"down"},Ze=function(e,n,a){var r=ne()(n),o=parseInt(r.pop());if(!r.length)e.splice(o,1);else{var s=oe(r,e,a);s[a].splice(o,1)}},Be=function(e,n,a,r,o){var s=ne()(n),i=parseInt(s.pop());if(o==="down"&&(i+=1),!s.length)e.splice(i,0,r);else{var c=oe(s,e,a);c[a].splice(i,0,r)}},He=function(e,n,a,r){var o=ne()(e),s=oe(n,e,r),i=wt(n,a);return i==="up"?(Ze(o,n,r),Be(o,a,r,s,i)):(Be(o,a,r,s,i),Ze(o,n,r)),o},At=function(e,n,a,r){var o=se(e,n,a,r);if(o.status)return o;var s=se(e,n,a,r);if(s.status)return s;var i=[n.id,a.id].map(function(x){return x.toString().split("-")}),c=w()(i,2),g=c[0],y=c[1];return{data:He(e,g,y,r),status:!0}},It=function(e,n,a,r){var o=se(e,n,a,r);if(o.status)return o;var s=ne()(e),i=[n.id,a.id].map(function(x){return x.toString().split("-")}),c=w()(i,2),g=c[0],y=c[1];return g.length!==y.length?{data:s,status:!1}:{data:He(s,g,y,r),status:!0}},Me=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"children",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"treeKey",r=function o(s,i,c){var g=c!==void 0?"".concat(c,"-").concat(i):String(i);s[a]=g;var y=s[n];Array.isArray(y)&&s[n].forEach(function(x,S){o(x,S,g)})};return e.forEach(function(o,s){r(o,s)}),e},Tt=["DragHandle","dragSortKey"],Re=(0,v.createContext)({handle:null}),Ft=function(e){var n=(0,Se.nB)({id:e.id}),a=n.attributes,r=n.listeners,o=n.setNodeRef,s=n.transform,i=n.transition,c=d()({transform:kt.ux.Transform.toString(s),transition:i},e==null?void 0:e.style),g=e.DragHandle,y=e.dragSortKey,x=fe()(e,Tt);if(y){var S=[];return v.Children.forEach(x.children,function(b,k){if(b.key===y){var f,C;S.push((0,t.jsx)(Re.Provider,{value:{handle:(0,t.jsx)(g,d()(d()({rowdata:b==null||(f=b.props)===null||f===void 0?void 0:f.record,index:b==null||(C=b.props)===null||C===void 0?void 0:C.index},r),a))},children:b},b.key||k));return}S.push(b)}),(0,t.jsx)("tr",d()(d()({},x),{},{ref:o,style:c,children:S}))}return(0,t.jsx)("tr",d()(d()(d()({},x),{},{ref:o,style:c},a),r))},Ot=v.memo(function(l){var e=Object.assign({},(ge()(l),l)),n=(0,v.useContext)(Re),a=n.handle;return a?(0,t.jsx)("td",d()(d()({},e),{},{children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[a," ",e.children]})})):(0,t.jsx)("td",d()({},e))}),Pt=function(e){return(0,t.jsx)("tbody",d()({},e))};function Kt(l){var e=l.dataSource,n=e===void 0?[]:e,a=l.onDragSortEnd,r=l.DragHandle,o=l.dragSortKey,s=l.sortType,i=l.childrenColumnName,c=l.treeKeyName,g=(0,X.Dy)((0,X.VT)(X.we),(0,X.VT)(X.MA));function y(f){var C,m=f.active,p=f.over;if(!(!(p!=null&&(C=p.id)!==null&&C!==void 0&&C.toString())||m.id===(p==null?void 0:p.id))){var N=Et(n,m,p);if(N.status){a==null||a(N.data,N.status);return}s==="freeSort"?N=At(n,m,p,i):s==="groupSort"?N=It(n,m,p,i):s==="treeSort"&&(N=se(n,m,p,i)),a==null||a(N.data,N.status)}}var x=(0,me.J)(function(f){return(0,t.jsx)(Se.Fo,{items:Nt(n,i,c),strategy:Se.qw,children:(0,t.jsx)(Pt,d()({},f))})}),S=(0,me.J)(function(f){var C,m=Object.assign({},(ge()(f),f)),p=ze(n,i,function(N){var I;return N[(I=l.rowKey)!==null&&I!==void 0?I:"index"]===m["data-row-key"]});return(0,t.jsx)(Ft,d()({id:p[c],dragSortKey:o,DragHandle:r},m),p[(C=l.rowKey)!==null&&C!==void 0?C:"index"])}),b=l.components||{};if(o){var k;b.body=d()(d()({},((k=l.components)===null||k===void 0?void 0:k.body)||{}),{},{wrapper:x,row:S,cell:Ot})}return{DndContext:function(C){return(0,t.jsx)(X.LB,{sensors:g,collisionDetection:X.pE,onDragEnd:y,children:C.children})},components:b}}var Zt=h(7906),Bt=["dataSource","defaultData","onDataSourceChange","onLoad","rowKey","dragSortKey","onDragSortEnd","dragSortHandlerRender","sortType","childrenColumnName","treeKeyName"],Ht=function(e){var n,a=e.dataSource,r=e.defaultData,o=e.onDataSourceChange,s=e.onLoad,i=e.rowKey,c=e.dragSortKey,g=e.onDragSortEnd,y=e.dragSortHandlerRender,x=e.sortType,S=x===void 0?"default":x,b=e.childrenColumnName,k=b===void 0?"children":b,f=e.treeKeyName,C=f===void 0?"treeKey":f,m=fe()(e,Bt),p=(0,jt.Z)(function(){return Me(r||[])},{value:Me(a),onChange:o}),N=w()(p,2),I=N[0],F=N[1],R=function(){var A=De()(re()().mark(function M(P){return re()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return F(P),O.abrupt("return",s==null?void 0:s(P));case 2:case"end":return O.stop()}},M)}));return function(P){return A.apply(this,arguments)}}(),Y=(0,v.useMemo)(function(){return function(A){var M=Object.assign({},(ge()(A),A)),P=(0,t.jsx)(Zt.Z,d()(d()({},M),{},{className:"habit-drag-sort-table-icon"})),E=y?y(A==null?void 0:A.rowdata,A==null?void 0:A.index,M):P;return(0,t.jsx)(t.Fragment,{children:E})}},[]),L=Kt({dataSource:I==null?void 0:I.slice(),dragSortKey:c,onDragSortEnd:g,components:e.components,rowKey:i,DragHandle:Y,sortType:S,childrenColumnName:k,treeKeyName:C}),G=L.components,z=L.DndContext;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Ct.Z,d()(d()({},m),{},{columns:(n=m.columns)===null||n===void 0?void 0:n.map(function(A){return(A.dataIndex===c||A.key===c)&&(A.render||(A.render=function(){return null})),A}),rowKey:i,onLoad:R,dataSource:I,onDataSourceChange:o,components:G,tableViewRender:function(M,P){return(0,t.jsx)(z,{children:P})}}))})},$e=function(e){var n=e.className,a=n===void 0?"":n,r=e.hourClassName,o=r===void 0?"":r;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("ul",{className:a,children:[(0,t.jsx)("li",{children:"00:00 - 06:00"}),(0,t.jsx)("li",{children:"06:00 - 12:00"}),(0,t.jsx)("li",{children:"12:00 - 18:00"}),(0,t.jsx)("li",{children:"18:00 - 24:00"})]}),(0,t.jsx)("ul",{className:o,children:Array.from({length:24}).fill(void 0).map(function(s,i){return(0,t.jsx)("li",{children:i},i)})})]})},Ve=h(54844),Mt=function(e){var n=e.options,a=n===void 0?{}:n,r=e.events,o=e.content,s=(0,v.useState)(),i=w()(s,2),c=i[0],g=i[1],y=(0,v.useState)(),x=w()(y,2),S=x[0],b=x[1];return(0,v.useEffect)(function(){if(S){var k=new Ve.ZP(d()({container:S,rootContainer:null,dragContainer:S,boundContainer:S,selectableTargets:["li"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"shift",keyContainer:window,hitRate:0},a));g(k)}},[S]),(0,v.useEffect)(function(){if(c&&r){var k=Object.keys(r);k.forEach(function(f){c.on(f,r[f])})}},[c,r]),(0,t.jsxs)("div",{className:"habit-selecto",children:[(0,t.jsx)($e,{className:"habit-selecto-split",hourClassName:"habit-selecto-hour"}),(0,t.jsx)("ul",{className:"habit-selecto-cont",ref:b,children:o})]})},Rt=function(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("ul",{className:"habit-selecto-week-left",children:[(0,t.jsx)("li",{className:"habit-selecto-week-title",children:"\u661F\u671F"}),(0,t.jsx)("li",{children:"\u4E00"}),(0,t.jsx)("li",{children:"\u4E8C"}),(0,t.jsx)("li",{children:"\u4E09"}),(0,t.jsx)("li",{children:"\u56DB"}),(0,t.jsx)("li",{children:"\u4E94"}),(0,t.jsx)("li",{children:"\u516D"}),(0,t.jsx)("li",{children:"\u65E5"})]})})},$t=function(e){var n=e.options,a=n===void 0?{}:n,r=e.events,o=e.className,s=o===void 0?"":o,i=e.style,c=e.render,g=(0,v.useState)(),y=w()(g,2),x=y[0],S=y[1],b=(0,v.useState)(),k=w()(b,2),f=k[0],C=k[1];return(0,v.useEffect)(function(){if(f){var m=new Ve.ZP(d()({container:f,rootContainer:null,dragContainer:f,boundContainer:f,selectableTargets:["li"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"shift",keyContainer:window,hitRate:0},a));S(m)}},[f]),(0,v.useEffect)(function(){if(x&&r){var m=Object.keys(r);m.forEach(function(p){x.on(p,r[p])})}},[x,r]),(0,t.jsxs)("div",{style:i,className:"habit-selecto-week ".concat(s),children:[(0,t.jsx)(Rt,{}),(0,t.jsxs)("div",{className:"habit-selecto-week-right",children:[(0,t.jsx)($e,{className:"habit-selecto-week-split",hourClassName:"habit-selecto-week-hour"}),(0,t.jsx)("ul",{className:"habit-selecto-week-cont",ref:C,children:Array.from({length:7}).fill(null).map(function(m,p){return(0,t.jsx)(v.Fragment,{children:c(p)},p)})})]})]})};function Ge(l,e,n){var a=e<0?l.length+e:e;if(a>=0&&a<l.length){var r=n<0?l.length+n:n,o=l.splice(e,1),s=w()(o,1),i=s[0];l.splice(r,0,i)}}function ie(l){var e=l.array,n=l.fromIndex,a=l.toIndex,r=ne()(e);return Ge(r,n,a),r}var ze=function l(e,n,a){if(!Array.isArray(e))return null;for(var r=0;r<e.length;r++){var o=e[r];if(a(o,r,e))return o;var s=o[n];if(Array.isArray(s)){var i=l(s,n,a);if(i)return i}}return null}}}]);
