"use strict";(self.webpackChunk_ddbor_habit=self.webpackChunk_ddbor_habit||[]).push([[343],{8343:function(xe,O,t){t.r(O),t.d(O,{HabitRangePicker:function(){return X}});var G=t(57213),o=t.n(G),J=t(54306),m=t.n(J),K=t(91747),Q=t(12254),j=t(70644),U=t(71282),V=t(89155),R=t(44539),B=t(33970),r=t(85170),W=t(74637),s=t.n(W),e=t(43010),N=function(){return[{label:"\u4ECA\u65E5",value:[s()(),s()()]},{label:"\u6628\u65E5",value:[s()().subtract(1,"d"),s()().subtract(1,"d")]}]},X=function(l){var c=l.value,$=l.popoverProps,q=l.buttonProps,_=l.presetsButtonProps,ee=l.subtmitButtonProps,ae=l.cancelButtonProps,v=l.presets,ne=l.startDatePickerProps,te=l.endDatePickerProps,F=l.format,C=F===void 0?"YYYY-MM-DD":F,S=l.compared,h=l.onChange,re=(0,r.useState)(["",""]),M=m()(re,2),f=M[0],se=M[1],oe=(0,r.useState)(c),z=m()(oe,2),i=z[0],k=z[1],le=(0,r.useState)(["",""]),T=m()(le,2),D=T[0],P=T[1],ie=(0,r.useState)(!1),A=m()(ie,2),y=A[0],b=A[1],u=(0,r.useMemo)(function(){return typeof S=="boolean"},[S]),de=(0,r.useState)(!1),Y=m()(de,2),x=Y[0],H=Y[1];(0,r.useEffect)(function(){H(u?S:null)},[S]);var p=(0,r.useMemo)(function(){return u&&!x},[u,x]),I=(0,r.useMemo)(function(){return{textAlign:u&&!p?"center":"left"}},[u,p]),ce=(0,r.useMemo)(function(){return y?180:0},[y]),Z=(0,r.useMemo)(function(){var a,n;if(u){var d,E;return[((d=N().find(function(g){return s()(g.value[0]).isSame(c[0],"d")}))===null||d===void 0?void 0:d.label)||f[0],p?"":((E=N().find(function(g){return s()(g.value[0]).isSame(c[1],"d")}))===null||E===void 0?void 0:E.label)||f[1]]}var L=(a=v||[])===null||a===void 0||(n=a.concat(N()).find(function(g){return s()(g.value[0]).isSame(c[0],"d")&&s()(g.value[1]).isSame(c[1],"d")}))===null||n===void 0?void 0:n.label;return[L||f[0],L?"":f[1]]},[c,v,u,p,f]),ue=(0,r.useCallback)(function(a){return a&&(p&&a>s()().endOf("d")||i[1]&&a>i[1])},[i[1],p]),ve=(0,r.useCallback)(function(a){return a&&(i[0]&&a<i[0]||a>s()().endOf("d"))},[i[0],p]);(0,r.useEffect)(function(){k(c);var a=[s()(c[0]).format(C),s()(c[1]).format(C)];se(a),P(a)},[c]);var pe=function(n,d){k([n,i[1]]),P([d,D[1]])},he=function(n,d){k([i[0],n]),P([D[0],d])},ge=function(n){b(n)},me=function(){b(!1),h==null||h(i,D,x)},fe=function(n){k(n.value);var d=[s()(n.value[0]).format(C),s()(n.value[1]).format(C)];P(d),b(!1),h==null||h(n.value,d,x)},be=(0,r.useCallback)(function(){return v==null?void 0:v.map(function(a,n){return typeof a.label=="string"?(0,e.jsx)("div",{className:"habit-range-picker-popover-presets-item",children:(0,e.jsx)(j.ZP,o()(o()({type:"link",size:"small",style:{padding:0,textAlign:"left",width:"100%"},onClick:function(){return fe(a)}},_),{},{children:a.label}))},n):a.label})},[v]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,o()(o()({trigger:"click",placement:"bottom",open:y,onOpenChange:ge,getPopupContainer:function(n){return n},overlayInnerStyle:{padding:0}},$),{},{content:(0,e.jsxs)("div",{className:"habit-range-picker-popover-content",children:[(0,e.jsxs)("div",{className:"habit-range-picker-popover-head",children:[(0,e.jsxs)("div",{className:"habit-range-picker-popover-head-title",children:[(0,e.jsx)("div",{children:"\u9009\u62E9\u65E5\u671F:"}),u&&(0,e.jsxs)("div",{className:"habit-range-picker-popover-head-switch",children:[(0,e.jsx)("span",{children:"\u5BF9\u6BD4"}),(0,e.jsx)(V.Z,{size:"small",checked:!!x,onChange:function(n){return H(n)}})]})]}),(0,e.jsxs)("div",{className:"habit-range-picker-popover-date",children:[(0,e.jsx)(R.Z,o()({showToday:!1,allowClear:!1,size:"small",value:i[0],disabledDate:ue,onChange:pe},ne)),(0,e.jsx)("span",{className:"habit-range-picker-popover-date-separator",children:"-"}),(0,e.jsx)(R.Z,o()({showToday:!1,allowClear:!1,size:"small",placement:"bottomRight",value:i[1],disabledDate:ve,onChange:he,disabled:p},te))]})]}),(0,e.jsx)(B.Z,{style:{margin:0}}),v&&v.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"habit-range-picker-popover-presets",children:[(0,e.jsx)("div",{className:"habit-range-picker-popover-presets-title",children:"\u5FEB\u6377\u65E5\u671F:"}),(0,e.jsx)("div",{className:"habit-range-picker-popover-presets-list",children:be()})]}),(0,e.jsx)(B.Z,{style:{margin:0}})]}),(0,e.jsxs)("div",{className:"habit-range-picker-popover-footer",children:[(0,e.jsx)(j.ZP,o()(o()({type:"primary",size:"small",style:{marginRight:"8px"}},ee),{},{onClick:function(){return me()},children:"\u786E\u5B9A"})),(0,e.jsx)(j.ZP,o()(o()({size:"small"},ae),{},{onClick:function(){return b(!1)},children:"\u53D6\u6D88"}))]})]}),children:(0,e.jsx)("div",{className:"habit-range-picker",children:(0,e.jsx)(j.ZP,o()(o()({},q),{},{htmlType:"reset",onClick:function(){return b(!y)},children:(0,e.jsxs)("div",{className:"habit-range-picker-button",children:[(0,e.jsx)(K.Z,{style:{color:"#999"}}),(0,e.jsxs)("div",{className:"habit-range-picker-button-text",children:[(0,e.jsx)("span",{className:"habit-range-picker-button-text-item",style:I,children:Z[0]}),Z[1]&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"habit-range-picker-button-text-separator",children:u?"\u5BF9\u6BD4":"-"}),(0,e.jsx)("span",{className:"habit-range-picker-button-text-item",style:I,children:Z[1]})]})]}),(0,e.jsx)(Q.Z,{style:{color:"#999",transform:"rotate(".concat(ce,"deg)"),transition:"all 0.3s"}})]})}))})}))})}}}]);
